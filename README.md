# pothole__project
## pothole Detection using YOLOv8n with Tiling & Padding Optimization

### Project Background
> ë„ë¡œ í¬íŠ¸í™€ì€ ì°¨ëŸ‰ íŒŒì†, íƒ€ì´ì–´ ì†ìƒ, êµí†µì‚¬ê³ ë¥¼ ìœ ë°œí•˜ëŠ” ì£¼ìš” ì›ì¸ ì¤‘ í•˜ë‚˜ì´ë©°, 
ì§€ìì²´ì˜ ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì¦ê°€ì™€ ì§ê²°ë˜ëŠ” ì¸í”„ë¼ ê´€ë¦¬ ë¬¸ì œì´ë‹¤. 
íŠ¹íˆ ëŒ€ë„ì‹œì˜ ê²½ìš° ë„ë¡œ ê¸¸ì´ê°€ ë°©ëŒ€í•˜ì—¬ ì¸ë ¥ ê¸°ë°˜ ì ê²€ ë°©ì‹ì€ ì‹œê°„ê³¼ ë¹„ìš© ì¸¡ë©´ì—ì„œ í•œê³„ê°€ ì¡´ì¬í•œë‹¤.

> ìµœê·¼ ì»´í“¨í„° ë¹„ì „ ê¸°ìˆ ì„ í™œìš©í•œ ìë™ íƒì§€ ì‹œìŠ¤í…œì´ ì£¼ëª©ë°›ê³  ìˆìœ¼ë‚˜,
ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì–´ë ¤ì›€ì´ ì¡´ì¬í•œë‹¤.

1. í¬íŠ¸í™€ì€ ì‘ì€ ê°ì²´ì— í•´ë‹¹í•˜ë©° íƒì§€ê°€ ì–´ë µë‹¤.
2. ì¡°ëª…, ë…¸ë©´ ì§ˆê°, ì¹´ë©”ë¼ í”ë“¤ë¦¼ ë“± í™˜ê²½ ë³€í™”ê°€ í¬ë‹¤.
3. ì‹¤ì‹œê°„ ê´€ì œ ì‹œìŠ¤í…œ ì ìš©ì„ ìœ„í•´ ì—°ì‚° íš¨ìœ¨ì„±ì´ ìš”êµ¬ëœë‹¤.
4. CPU í™˜ê²½ì—ì„œë„ êµ¬ë™ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.

> ë”°ë¼ì„œ ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¨ìˆœíˆ YOLO ëª¨ë¸ì„ ì ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,
ì „ì²˜ë¦¬ ì „ëµ, í•™ìŠµ íŒŒë¼ë¯¸í„° íŠœë‹, confidence threshold ìµœì í™”ë¥¼ í†µí•´ ì‹¤ì œ ë„ë¡œ ê´€ì œ ì‹œìŠ¤í…œì— ì ìš© ê°€ëŠ¥í•œ ìµœì í™”ëœ í¬íŠ¸í™€ íƒì§€ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.

### How to run
ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¡œ ì‹¤í–‰ëœë‹¤.

1. Dataset ìƒì„± ë° ì „ì²˜ë¦¬
2. YOLOv8 ëª¨ë¸ í•™ìŠµ
3. Web ì‹¤í–‰

#### 1.Environment Setup
1. Python 3.9 ì´ìƒ ê¶Œì¥
í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ :

```
pip install ultralytics opencv-python numpy pandas
```

```
pip install ultralytics opencv-python streamlit yt-dlp numpy pandas
```

#### 2. Dataset ìƒì„± + ì „ì²˜ë¦¬
+ ì›ë³¸ ë°ì´í„° êµ¬ì¡°
  
```
archive/
 â”œâ”€â”€ images/
 â””â”€â”€ annotations/  (Pascal VOC XML)
```

+ ì‹¤í–‰
```
python cartoon.py
```

+ ì‹¤í–‰ process
- VOC â†’ YOLO í¬ë§· ë³€í™˜
- ì „ì²˜ë¦¬ ì ìš©
- train / val / test random split
- data.yaml ìƒì„±

+ ìƒì„± ê²°ê³¼
```
dataset_yolo/
 â”œâ”€â”€ images/
 â”‚    â”œâ”€â”€ train/
 â”‚    â”œâ”€â”€ val/
 â”‚    â””â”€â”€ test/
 â”œâ”€â”€ labels/
 â””â”€â”€ data.yaml
```

#### 3. Model Training
```
 runs/detect/pothole_yolov8s/weights/best.pt
```

#### 4. ì„±ëŠ¥ í™•ì¸
```
 python final_boost.py
```

 + ì¶œë ¥ ì˜ˆì‹œ
```
mAP@50     : 0.7443
Precision  : 0.7901
Recall     : 0.6584
```

#### 5. Confidence Threshold ìµœì í™”

```
python find_best_config.py
```

#### 6. ìµœì¢… ì‹¤í–‰ 

```
streamlit run app_final.py
```

#### 7. ìˆœì„œ ìš”ì•½

1. python cartoon.py
2. python final_boost.py
3. python find_best_config.py
4. streamlit run app_final.py

### ë¬¸ì œ í•´ê²° ë°©ë²•
ì•„ë˜ëŠ” í”„ë¡œì íŠ¸ ì‹¤í–‰ ì¤‘ ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œì™€ í•´ê²° ë°©ë²•ì…ë‹ˆë‹¤.


#### 1. best.pt íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (FileNotFoundError)
+ ì¦ìƒ
- `ê²½ë¡œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`
- `Missing best.pt`

+ ì›ì¸ 
- `MODEL_PATH`ê°€ ì˜ëª»ë¨ (íŠ¹íˆ `runs/detect`ê°€ ì¤‘ë³µë˜ëŠ” ê²½ìš°ê°€ ë§ìŒ)
- í•™ìŠµì´ ì™„ë£Œë˜ì§€ ì•Šì•„ best.ptê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ

+ í•´ê²°
1. ì‹¤ì œ íŒŒì¼ ìœ„ì¹˜ë¥¼ ë¨¼ì € í™•ì¸í•©ë‹ˆë‹¤.

ì˜ˆì‹œ(ì •ìƒ ê²½ë¡œ):
- `runs/detect/pothole_yolov8s/weights/best.pt`

2. `app_final.py` ë“±ì—ì„œ ì•„ë˜ì²˜ëŸ¼ ìˆ˜ì •í•©ë‹ˆë‹¤.

Mac/Linux:
```python
MODEL_PATH = "runs/detect/pothole_yolov8s/weights/best.pt"
```

Windows:
```python
MODEL_PATH = r"runs\detect\pothole_yolov8s\weights\best.pt"
```

#### 2. streamlit ì‹¤í–‰ì´ ì•ˆ ë©ë‹ˆë‹¤. (command not found / ModuleNotFound)

+ ì¦ìƒ
- streamlit: command not found
- ModuleNotFoundError: streamlit

+ ì›ì¸
- streamlitì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ê±°ë‚˜, í˜„ì¬ íŒŒì´ì¬ í™˜ê²½ê³¼ ì„¤ì¹˜ í™˜ê²½ì´ ë‹¤ë¦„

+ í•´ê²°
```
python -m pip install streamlit
streamlit run app_final.py
```

#### 3. ìœ íŠœë¸Œ ì˜ìƒ ë‹¤ìš´ë¡œë“œê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤. (yt-dlp ê´€ë ¨)

+ ì¦ìƒ
- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ëˆŒëŸ¬ë„ ì˜ìƒì´ ìƒì„±ë˜ì§€ ì•ŠìŒ
- yt-dlp ì—ëŸ¬ ë°œìƒ

+ ì›ì¸
- yt-dlp ë¯¸ì„¤ì¹˜ ë˜ëŠ” ì¼ë¶€ ìœ íŠœë¸Œ ì˜ìƒì€ ì œí•œ/ì°¨ë‹¨

+ í•´ê²°
1. ì„¤ì¹˜ í™•ì¸
```
python -m pip install yt-dlp
```

2. ìœ íŠœë¸Œ ëŒ€ì‹  íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸ ê¶Œì¥
3. Streamlitì—ì„œ ğŸ“‚ íŒŒì¼ ì„ íƒ í›„ mp4 ì—…ë¡œë“œ

#### 4. ì˜ìƒì´ ë¶„ì„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (temp_stream.mp4 ì—†ìŒ)

+ ì¦ìƒ
- ë¶„ì„í•  ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤. ìœ íŠœë¸Œ ë§í¬ë¥¼ ë„£ê±°ë‚˜ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.

+ ì›ì¸
- temp_stream.mp4 íŒŒì¼ì´ ì•„ì§ ìƒì„±ë˜ì§€ ì•ŠìŒ
- ë‹¤ìš´ë¡œë“œ/ì—…ë¡œë“œ ì „ì— "ê´€ì œ ì‹œì‘"ì„ ëˆŒë €ìŒ

+ í•´ê²°
1. ìœ íŠœë¸Œ: ì˜ìƒ ì¤€ë¹„(ë‹¤ìš´ë¡œë“œ) ë¨¼ì € í´ë¦­
2. íŒŒì¼: mp4 ì—…ë¡œë“œ í›„ ìë™ ì €ì¥ í™•ì¸
3. ê·¸ ë‹¤ìŒ ê´€ì œ ì‹œì‘/ì¬ê°œ ë²„íŠ¼ í´ë¦­

#### 5. íŒì—…ì´ ê³„ì† ëœ¨ê³  ì˜ìƒì´ ì•ˆ ì´ì–´ì§‘ë‹ˆë‹¤. (ì¤‘ë³µ ê°ì§€)

+ ì¦ìƒ
- í¬íŠ¸í™€ì´ í•œ ë²ˆ ê°ì§€ëœ ì´í›„ ê°™ì€ ì§€ì ì—ì„œ ê³„ì† ê°ì§€ë¨

+ ì›ì¸
- ê°ì§€ ì§í›„ ê°™ì€ í”„ë ˆì„ ê·¼ì²˜ì—ì„œ ë‹¤ì‹œ íƒì§€ë˜ëŠ” ìƒí™©
- ì´ì–´ë³´ê¸° ë¡œì§ì´ ì œëŒ€ë¡œ ì ìš©ë˜ì§€ ì•ŠìŒ

+ í•´ê²°
- resume_video()ì—ì„œ ê°ì§€ ì§í›„ í”„ë ˆì„ì„ ê±´ë„ˆë›°ë„ë¡ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•¨
- st.session_state.current_frame += 30  # ì•½ 0.3ì´ˆ ìŠ¤í‚µ
- í•„ìš” ì‹œ 30 â†’ 60ìœ¼ë¡œ ëŠ˜ë ¤ì„œ ì¤‘ë³µ ê°ì§€ë¥¼ ë” ì¤„ì¼ ìˆ˜ ìˆìŒ

### Dataset
- Source: Kaggle dataset - https://www.kaggle.com/datasets/andrewmvd/pothole-detection/data
- Classes: 1 - pothole
- Total Images: 665
- Train / Val / Test split: 80 / 10 / 10
- Annotation format: YOLOv8s
